<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document-Adaptive Smooth Scroll Animation</title>
<style>
  /* Minimal styling to ensure the image stays centered */
  .scroll-animation {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    max-width: 100%;
    height: auto;
    z-index: 1000; /* Ensure it's above other content */
  }
  /* Ensure there's enough content to scroll */
  body {
    height: 300vh; /* Adjust this value based on your content */
  }
</style>
</head>
<body>

<img id="scroll-animation" class="scroll-animation" src="https://res.cloudinary.com/dn9pwzu2b/image/upload/v1711072707/image/Hazen_Intro_V4_00000.webp" alt="Scroll animation frame">

<script>
  const frameCount = 139;
  const baseImagePath = "https://res.cloudinary.com/dn9pwzu2b/image/upload/v1711072707/image/Hazen_Intro_V4_";
  const frameUrls = Array.from({ length: frameCount }, (_, index) => `${baseImagePath}${String(index).padStart(5, '0')}.webp`);

  const imgElement = document.getElementById('scroll-animation');
  let lastScrollPosition = 0;
  let animationFrameId;

  function animateScroll() {
    const scrollPosition = window.pageYOffset || document.documentElement.scrollTop;
    const scrollDifference = scrollPosition - lastScrollPosition;
    if (Math.abs(scrollDifference) < 1) {
      cancelAnimationFrame(animationFrameId);
      animationFrameId = null;
      return;
    }

    const scrollFraction = scrollPosition / (document.documentElement.scrollHeight - window.innerHeight);
    const frameIndex = Math.min(frameCount - 1, Math.floor(scrollFraction * frameCount));
    imgElement.src = frameUrls[frameIndex];
    lastScrollPosition = scrollPosition;

    animationFrameId = requestAnimationFrame(animateScroll);
  }

  // Listen for scroll events to start the animation
  window.addEventListener('scroll', () => {
    if (!animationFrameId) {
      animationFrameId = requestAnimationFrame(animateScroll);
    }
  });

  // Optionally preload images to reduce flicker
  function preloadImages() {
    frameUrls.forEach(url => {
      const img = new Image();
      img.src = url;
    });
  }

  preloadImages(); // Call this function if you want to preload images
</script>
</body>
</html>
